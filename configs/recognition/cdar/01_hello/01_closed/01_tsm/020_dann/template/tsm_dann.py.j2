_base_ = [
    '../../../../_base_/data/da_data.py',
    '../../../../_base_/models/tsm_dann_model.py',
    '../../../../../_base_/closed_tsm_training.py',
    '../../../../../../../_base_/default_runtime.py',
]

dataset_settings = dict(
    source=dict(
        train=dict(
            type='RawframeDataset',
            data_prefix='/local_datasets/{{ source }}/rawframes',
            ann_file='data/_filelists/{{ source }}/filelist_{{ source | regex_replace("\d*", "") }}_train_closed.txt'),
        test=dict(
            type='RawframeDataset',
            test_mode=True,
            data_prefix='/local_datasets/{{ source }}/rawframes',
            ann_file='data/_filelists/{{ source }}/filelist_{{ source | regex_replace("\d*", "") }}_test_closed.txt')),
    target=dict(
        train=dict(
            type='RawframeDataset',
            data_prefix='/local_datasets/{{ target }}/rawframes',
            ann_file='data/_filelists/{{ target }}/filelist_{{ target | regex_replace("\d*", "") }}_train_closed.txt'),
        valid=dict(
            type='RawframeDataset',
            test_mode=True,
            data_prefix='/local_datasets/{{ target }}/rawframes',
            ann_file='data/_filelists/{{ target }}/filelist_{{ target | regex_replace("\d*", "") }}_val_closed.txt'),
        test=dict(
            type='RawframeDataset',
            test_mode=True,
            data_prefix='/local_datasets/{{ target }}/rawframes',
            ann_file='data/_filelists/{{ target }}/filelist_{{ target | regex_replace("\d*", "") }}_test_closed.txt')))

data = dict(
    train=dict(
        source=dict( **dataset_settings['source']['train']),
        target=dict( **dataset_settings['target']['train']),
    ),
    val=dict( **dataset_settings['target']['valid']),
    test=dict(**dataset_settings['target']['test']),
)
